**üñ•Ô∏è VPS Settings Node (Ubuntu-1step.sh)**
–°–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø–µ—Ä–≤–∏—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ VPS –ø–æ–¥ Ubuntu (20.04/22.04/24.04).
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É –±–∞–∑–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫—É SSH, —Ñ–∞–µ—Ä–≤–æ–ª–∞, Fail2Ban –∏ —Å–æ–∑–¥–∞—ë—Ç –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã.

**üöÄ –ó–∞–ø—É—Å–∫**

bash <(curl -sL https://raw.githubusercontent.com/f1vestars/VPS_Settings_Node/refs/heads/main/Ubuntu-1step.sh)

**‚ö†Ô∏è –í–∞–∂–Ω–æ:**

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–æ –≤–Ω–µ—à–Ω–µ–º —Ñ–∞–µ—Ä–≤–æ–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø–∞–Ω–µ–ª–∏ Infomaniak) –æ—Ç–∫—Ä—ã—Ç –Ω–æ–≤—ã–π –ø–æ—Ä—Ç SSH.
–ù–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —Ç–µ–∫—É—â—É—é SSH-—Å–µ—Å—Å–∏—é, –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç–µ –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π –ø–æ—Ä—Ç.

**üîß** –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç****

**1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤**

- –í—ã–ø–æ–ª–Ω—è–µ—Ç apt dist-upgrade.
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç: ufw, fail2ban, rsyslog, tzdata, chrony, unattended-upgrades, sudo, nftables.
- –í–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∞–ø–¥–µ–π—Ç–æ–≤.
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç chrony –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏.

**2. –í–≤–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**

–ò–º—è –Ω–æ–≤–æ–≥–æ sudo-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: eramer).
–ù–æ–≤—ã–π SSH-–ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10095).
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî ‚Äú–∞–¥–º–∏–Ω—Å–∫–∏–π‚Äù –ø–æ—Ä—Ç 2222 —Ç–æ–ª—å–∫–æ –¥–ª—è –±–µ–ª–æ–≥–æ IP.
–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ HTTPS/QUIC (443/tcp, 443/udp).
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞.
–í–≤–æ–¥ –ø—É–±–ª–∏—á–Ω–æ–≥–æ SSH-–∫–ª—é—á–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**3. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∞–≤–∞–º–∏ sudo.
–ó–∞–¥–∞—ë—Ç –ø–∞—Ä–æ–ª—å.
–î–æ–±–∞–≤–ª—è–µ—Ç SSH-–∫–ª—é—á –≤ ~/.ssh/authorized_keys.
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ UFW (—Ñ–∞–µ—Ä–≤–æ–ª–∞)
–ü–æ–ª–∏—Ç–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
deny incoming, allow outgoing, deny routed.
–†–∞–∑—Ä–µ—à–∞–µ—Ç SSH –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É (—Å rate-limit).
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–æ—Ä—Ç 2222 —Ç–æ–ª—å–∫–æ —Å –±–µ–ª–æ–≥–æ IP.
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: HTTPS/QUIC.
–í–∫–ª—é—á–∞–µ—Ç UFW –∏ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç—É—Å.
5. –•–∞—Ä–¥–µ–Ω–∏–Ω–≥ SSH
–û—Ç–∫–ª—é—á–∞–µ—Ç –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é –∏ root-–¥–æ—Å—Ç—É–ø.
–í–∫–ª—é—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤—Ö–æ–¥ –ø–æ –∫–ª—é—á–∞–º.
–°—Ç–∞–≤–∏—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (MaxAuthTries, LoginGraceTime, ClientAliveInterval, ClientAliveCountMax).
–ü–µ—Ä–µ–≤–æ–¥–∏—Ç SSH –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø–æ—Ä—Ç.
–û—Ç–∫–ª—é—á–∞–µ—Ç ssh.socket, –≤–∫–ª—é—á–∞–µ—Ç ssh.service.
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç SSH.
6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Fail2Ban
–í–∫–ª—é—á–∞–µ—Ç jail –¥–ª—è sshd –Ω–∞ –Ω–æ–≤–æ–º –ø–æ—Ä—Ç—É (aggressive).
–í–∫–ª—é—á–∞–µ—Ç jail recidive –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –±–∞–Ω–æ–≤.
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è tls-handshake, iperf3.
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è nginx –∏ apache (–µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã).
–ó–∞–ø—É—Å–∫–∞–µ—Ç Fail2Ban.
7. –§–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
–ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –≤—Ö–æ–¥–∞:
ssh -p <–ø–æ—Ä—Ç> <user>@<IP>
–°—Ç–∞—Ç—É—Å UFW.
–°—Ç–∞—Ç—É—Å Fail2Ban.
